# YTM Exporter

Yahoo! タグマネージャーからデータをエクスポートするための[ユーザースクリプト]です

更新や移管の際に発生するタグの突き合わせ作業や、エクセルにエビデンスを作成する際の入力先ベースとして役立ちます

[ユーザースクリプト]: https://www.google.co.jp/search?q=%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88

## 機能

- サービスタグをエクスポート

## インストール

1. Chrome に [Tampermonkey] をインストール
2. [YTM Exporter] をクリックしてインストール

[Tampermonkey]: https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo
[YTM Exporter]: https://github.com/matzkoh/userscripts/raw/master/packages/ytm-exporter/dist/index.user.js

## 使用方法

### サービスタグ設定をエクセル CSV 形式でダウンロード

1. YTM 管理画面でサービスタグのリストが表示されているページを開く
   - アウトプット → `サービスタグ管理`
   - インプット → `ウェブサイト` → ページ → `サービスタグ設定`
2. エクスポートするタグにチェックをつけて選択する
3. 拡張のアイコンをクリックする
4. YTM Exporter の下にある `タグをエクスポート` をクリックする
5. 進捗バーが 100% になると CSV ファイルに保存されます

![](screenshots/menu.png)

#### エクスポートされるエクセルについて

| 列名           | 例                                                       | 説明                                                         |
| -------------- | -------------------------------------------------------- | ------------------------------------------------------------ |
| ID             | 7029086                                                  | タグ毎に一意な数値                                           |
| ステータス     | 有効                                                     |                                                              |
| タグ名         | 媒体 CV タグ                                             |                                                              |
| サービス提供元 | Yahoo! JAPAN                                             |                                                              |
| 作成日         | 2019年1月25日(金) 15:38                                  |                                                              |
| 更新日         | 2019年3月6日(水) 11:30                                   |                                                              |
| カスタムタグ   | `<script> ... </script>`                                 | スマートカスタムタグの設定内容<br>(カタログタグの場合は空欄) |
| カタログタグ   | `{"label":"***","amount":"0","spaceId":"***"}`           | カタログタグの設定内容<br>(スマートカスタムタグの場合は空欄) |
| タグ実行条件   | `([[タイトル]] == "Title" \|\| [[ボタンID]] == "btn-1")` | タグ実行条件 (AND は `&&`、OR は `\|\|` で表記)              |
| 実行ページ     | `https://example.com/**`                                 | 改行区切りの実行ページ URL                                   |
